<?xml version="1.0" encoding="UTF-8"?>
<script xmlns="http://www.xstep.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <variables>
        <char-group name="pc">,;.:!\?</char-group>
        <!-- sources -->
        <variable type="execution-file" name="execute">file:///C:/Users/Gerrit/txstep/ueb/txstep.tu</variable>
        <variable type="permanent-file" name="dta-x" code="utf8"
            >file:///C:/Users/Gerrit/txstep/txt/process_dtaq.xml</variable>
        <variable type="permanent-file" name="zeno-h" code="utf8"
            >file:///C:/Users/Gerrit/txstep/txt/proc_zeno.html</variable>
        <variable type="permanent-file" name="gutenb-h" code="utf8"
            >file:///C:/Users/Gerrit/txstep/txt/proc_gutenb.html</variable>
        <variable type="permanent-file" name="kproj-h" code="utf8"
            >file:///C:/Users/Gerrit/txstep/txt/proc_kproject.xml</variable>
        <variable type="permanent-file" name="lt-x" code="utf8"
            >file:///C:/Users/Gerrit/txstep/txt/process-lt.xml</variable>
        <!-- par ko -->
        <variable type="scratch-file" name="par"/>
        <!-- tf -->
        <variable type="permanent-file" name="dta-t" format="tustep" option="erase"
            >file:///C:/Users/Gerrit/txstep/txt/process_dtaq.tf</variable>
        <variable type="permanent-file" name="zeno-t" format="tustep" option="erase"
            >file:///C:/Users/Gerrit/txstep/txt/zeno.tf</variable>
        <variable type="permanent-file" name="gutenb-t" format="tustep" option="erase"
            >file:///C:/Users/Gerrit/txstep/txt/gutenb.tf</variable>
        <variable type="permanent-file" name="kproj-t" format="tustep" option="erase"
            >file:///C:/Users/Gerrit/txstep/txt/kproject.tf</variable>
        <variable type="permanent-file" name="lt-t" format="tustep" option="erase"
            >file:///C:/Users/Gerrit/txstep/txt/lt.tf</variable>
        <!-- ve -->
        <variable type="permanent-file" name="diff1" option="erase" format="tustep"
            >file:///C:/Users/Gerrit/txstep/ve/diff1.tf</variable>
        <variable type="permanent-file" name="diff2" option="erase" format="tustep"
            >file:///C:/Users/Gerrit/txstep/ve/diff2.tf</variable>
        <variable type="permanent-file" name="diff3" option="erase" format="tustep"
            >file:///C:/Users/Gerrit/txstep/ve/diff3.tf</variable>
        <variable type="permanent-file" name="diff4" option="erase" format="tustep"
            >file:///C:/Users/Gerrit/txstep/ve/diff4.tf</variable>
        <variable type="permanent-file" name="diff5" option="erase" format="tustep"
            >file:///C:/Users/Gerrit/txstep/ve/diff5.tf</variable>
        <!-- va -->
        <variable type="permanent-file" name="diff-listing" option="erase" format="tustep"
            >file:///C:/Users/Gerrit/txstep/va/diff.list</variable>
    </variables>
    <transform source="$dta-x" destination="$dta-t" save-params="$par">
        <define-text-units>
            <text-unit-start>
                <comparison-table>
                    <exclusion-string>{{/</exclusion-string>
                    <comparison-string>{{</comparison-string>
                </comparison-table>
            </text-unit-start>
        </define-text-units>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>{{pb facs="^#f{#}" n="{#}"{0} /}}</search-string>
                            <replacement-string/>
                        </string-pair>
                        <string-pair>
                            <search-string>^&amp;^#x201E;</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>^&amp;^#x201C;</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>^&amp;^#x2013;</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>^&amp;^#x2019;</search-string>
                            <replacement-string>'</replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>}}</search-string>
                            <replacement-string>}} </replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <remove-blanks where="both"/>
        <suppress-blank-lines/>
        <output-records max-length="120"/>
    </transform>
    <transform source="$zeno-h" destination="$zeno-t">
        <define-text-units>
            <text-unit-start>
                <comparison-table>
                    <exclusion-string>{{/</exclusion-string>
                    <comparison-string>{{</comparison-string>
                </comparison-table>
            </text-unit-start>
        </define-text-units>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string> class="zenoPC"</search-string>
                            <replacement-string/>
                        </string-pair>
                        <string-pair>
                            <search-string> class="zenoPLm4n0"</search-string>
                            <replacement-string/>
                        </string-pair>
                        <string-pair>
                            <search-string>{{a class="zenoTXKonk" href="/Literatur/L/Kafka-GW+Bd.+1" name="{#}" title="Vorlage"{0} }}\[{#}\]{{/a}}</search-string>
                            <replacement-string/>
                        </string-pair>
                        <string-pair>
                            <search-string>#.}}</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#.{{</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#\[2013\]</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>}}</search-string>
                            <replacement-string>}} </replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <remove-blanks where="both"/>
        <suppress-blank-lines/>
        <output-records max-length="120"/>
    </transform>
    <transform source="$gutenb-h" destination="$gutenb-t">
        <define-text-units>
            <text-unit-start>
                <comparison-table>
                    <exclusion-string>{{/</exclusion-string>
                    <comparison-string>{{</comparison-string>
                </comparison-table>
            </text-unit-start>
        </define-text-units>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>^&amp;nbsp;</search-string>
                            <replacement-string> </replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>^&amp;nbsp;{[}-{]}{c:pc}</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#.}}</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#.{{</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#\[2013\]</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>}}</search-string>
                            <replacement-string>}} </replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <remove-blanks where="both"/>
        <suppress-blank-lines/>
        <output-records max-length="120"/>
    </transform>
    <transform source="$kproj-h" destination="$kproj-t">
        <define-text-units>
            <text-unit-start>
                <comparison-table>
                    <exclusion-string>{{/</exclusion-string>
                    <comparison-string>{{</comparison-string>
                </comparison-table>
            </text-unit-start>
        </define-text-units>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>#\[0096\]</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#\[0092\]</search-string>
                            <replacement-string>'</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>.{[} {]}" "{&amp;a}</search-string>
                            <replacement-string/>
                        </string-pair>
                        <!--<string-pair>
                            <search-string>.{[} {]}" {&amp;a}</search-string>
                            <replacement-string/>
                        </string-pair>-->
                        <!-- führt leider auch zu falschen Ersetzungen -->
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>}}</search-string>
                            <replacement-string>}} </replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <remove-blanks where="both"/>
        <suppress-blank-lines/>
        <output-records max-length="120"/>
    </transform>
    <transform source="$lt-x" destination="$lt-t">
        <define-text-units>
            <text-unit-start>
                <comparison-table>
                    <exclusion-string>{{/</exclusion-string>
                    <comparison-string>{{</comparison-string>
                </comparison-table>
            </text-unit-start>
        </define-text-units>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>#\[0096\]</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#\[0092\]</search-string>
                            <replacement-string>'</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#\[2013\]</search-string>
                            <replacement-string>--</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#.,</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>#.'</search-string>
                            <replacement-string>"</replacement-string>
                        </string-pair>
                        <string-pair>
                            <search-string>{{title/}}</search-string>
                            <replacement-string/>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <pass>
            <modify>
                <exchange>
                    <exchange-table>
                        <string-pair>
                            <search-string>}}</search-string>
                            <replacement-string>}} </replacement-string>
                        </string-pair>
                    </exchange-table>
                </exchange>
            </modify>
        </pass>
        <remove-blanks where="both"/>
        <suppress-blank-lines/>
        <output-records max-length="120"/>
    </transform>
    <compare versiona="$dta-t" versionb="$zeno-t" variants="$diff1" listing="-">
        <compare-units mode="word"/>
        <locations abbreviate="no" word-number="always"/>
        <add-context>
            <omission length-before="0" length-lemma="5" length-after="0"/>
            <replacement length-before="0" length-lemma="5" length-after="0"/>
            <insertion length-before="1" length-after="0"/>
        </add-context>
        <pos-ind-b value="yes"/>
        <version-id>GW</version-id>
    </compare>
    <compare versiona="$dta-t" versionb="$gutenb-t" variants="$diff2" listing="-">
        <compare-units mode="word"/>
        <locations abbreviate="no" word-number="always"/>
        <add-context>
            <omission length-before="0" length-lemma="5" length-after="0"/>
            <replacement length-before="0" length-lemma="5" length-after="0"/>
            <insertion length-before="1" length-after="0"/>
        </add-context>
        <pos-ind-b value="yes"/>
        <version-id>Fi Bü</version-id>
    </compare>
    <compare versiona="$dta-t" versionb="$kproj-t" variants="$diff3" type="corrections" listing="-">
        <compare-units mode="word"/>
        <!-- 1.-3. Kap. 1925 -->
        <select-area versiona="0.229-1.803/61,99" versionb="0.8-1.369/84,99"/>
        <!-- 4. Kap. Freundin des Frl. Bürstner, in KProj als erstes Anhang-Kap. -->
        <select-area versiona="1.868-2.46/07,99" versionb="4.305-4.398/73,99"/>
        <!-- 5. Kap. Prügler bis Schluss -->
        <select-area versiona="2.56-5.348/03,11" versionb="1.448-4.298/03,99"/>
        <!-- normalize? -->
        <locations abbreviate="no" word-number="always"/>
        <add-context>
            <omission length-before="0" length-lemma="5" length-after="0"/>
            <replacement length-before="0" length-lemma="5" length-after="0"/>
            <insertion length-before="1" length-after="0"/>
        </add-context>
        <pos-ind-b value="yes"/>
        <version-id>KKA</version-id>
    </compare>
    <compare versiona="$zeno-t" versionb="$gutenb-t" variants="$diff4" listing="-">
        <compare-units mode="word"/>
        <add-context>
            <omission length-before="0" length-lemma="5" length-after="0"/>
            <replacement length-before="0" length-lemma="5" length-after="0"/>
            <insertion length-before="1" length-after="0"/>
        </add-context>
    </compare>
    <compare versiona="$dta-t" versionb="$lt-t" variants="$diff5" type="corrections" listing="-">
        <compare-units mode="word"/>
        <select-area versiona="0.235-0.357/08,10" versionb="0.18-0.94/43,7"/>
        <locations abbreviate="no" word-number="always"/>
        <add-context>
            <omission length-before="0" length-lemma="5" length-after="0"/>
            <replacement length-before="0" length-lemma="5" length-after="0"/>
            <insertion length-before="1" length-after="0"/>
        </add-context>
        <pos-ind-b value="yes"/>
        <version-id>Krause</version-id>
    </compare>    
    <collate source="$dta-t" mode="single-witness" diff-file="$diff1'$diff2'$diff3'$diff5" listing="$diff-listing"
        special="code">
        <list lines="all"/>
        <var-marks id-text="=" missing-text=" " id-var="id-prev"/>
    </collate>
    <display file="$diff-listing" type="listing" mode="ps-landscape"/>
</script>
